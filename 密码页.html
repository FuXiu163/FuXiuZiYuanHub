<!DOCTYPE html>
<html>
<head>
    <title>FuXiu的私密空间</title>
    <link rel="icon" href="密码页图标.png" type="image/png">
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: Arial;
            flex-direction: column;
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        h2 {
            color: #666;
            font-size: 16px;
            margin-bottom: 30px;
        }
        .login-box {
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            text-align: center;
        }
        input {
            margin: 10px 0;
            padding: 8px;
        }
        button {
            padding: 8px 15px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:disabled {
            background: #cccccc;
        }
    </style>
</head>
<!-- 在body标签内添加倒计时显示 -->
<body>
    <div id="countdown" style="color: black; font-size: 24px; text-align: center; margin-bottom: 10px;"></div>
    <h1>您即将进入由FuXiu创建的私密空间</h1>
    <h2>请输入由FuXiu提供的正确密码，若失败5次，将只能于10分钟后再试</h2>
    
    <div class="login-box">
        <input type="password" id="password" placeholder="输入密码">
        <button id="submitBtn" onclick="checkPassword()">进入</button>
        <p id="error" style="color:red;display:none;"></p>
        <p id="attempts" style="color:#666;"></p>
        <p id="lockMsg" style="color:red;display:none;"></p>
    </div>

    <script>
        let attempts = 0;
        let lockTime = 10; // 初始锁定时间(分钟)
        let currentLockTime = lockTime; // 当前锁定时间
        let isLocked = false;
        let countdownInterval;
        
        // 从本地存储加载尝试次数和锁定状态
        if(localStorage.getItem('lockEndTime')) {
            const lockEndTime = parseInt(localStorage.getItem('lockEndTime'));
            if(Date.now() < lockEndTime) {
                isLocked = true;
                const remainingTime = Math.ceil((lockEndTime - Date.now()) / 1000);
                updateLockMessage(remainingTime);
            }
        }
        
        if(localStorage.getItem('attempts')) {
            attempts = parseInt(localStorage.getItem('attempts'));
        }
        
        // 修改checkPassword函数
        // 修改checkPassword函数中的密码
        function checkPassword() {
            const password = document.getElementById('password').value;
            const correctPassword = "FuXiu12/56/78"; // 修改后的密码
            
            document.getElementById('password').value = '';
            
            if (isLocked) {
                document.getElementById('error').textContent = "账户已锁定，请稍后再试";
                document.getElementById('error').style.display = 'block';
                return;
            }
            
            if (password === correctPassword) {
                window.location.href = "私密页面.html";
            } else {
                attempts++;
                localStorage.setItem('attempts', attempts);
                
                if (attempts >= 5) {
                    currentLockTime += 10;
                    lockAccount(currentLockTime);
                }
                
                document.getElementById('error').textContent = `密码错误，剩余尝试次数: ${5 - attempts}`;
                document.getElementById('error').style.display = 'block';
            }
        }

        function lockAccount(minutes) {
            isLocked = true;
            const lockEndTime = Date.now() + minutes * 60 * 1000;
            localStorage.setItem('lockEndTime', lockEndTime);
            updateLockMessage(minutes * 60);
            
            setTimeout(() => {
                checkLockStatus();
            }, minutes * 60 * 1000);
        }

        function checkLockStatus() {
            isLocked = false;
            attempts = 0;
            localStorage.removeItem('attempts');
            localStorage.removeItem('lockEndTime');
            document.getElementById('error').style.display = 'none';
            document.getElementById('countdown').style.display = 'none';
            document.getElementById('submitBtn').disabled = false;
        }

        // 在window.onload函数中添加重置按钮
        window.onload = function() {
            document.getElementById('submitBtn').addEventListener('click', checkPassword);
            
            // 添加Enter键监听
            document.getElementById('password').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkPassword();
                }
            });
            
            if(isLocked) {
                const lockEndTime = parseInt(localStorage.getItem('lockEndTime'));
                const remainingTime = Math.ceil((lockEndTime - Date.now()) / 1000);
                updateLockMessage(remainingTime);
            }
        }
    </script>
</body>
</html>
<script>
// 修改updateLockMessage函数
function updateLockMessage(secondsLeft) {
    const countdownElement = document.getElementById('countdown');
    countdownElement.style.fontSize = '24px';
    countdownElement.textContent = `距离下一次重试还有${secondsLeft}秒`;
    countdownElement.style.display = 'block';
    
    clearInterval(countdownInterval);
    countdownInterval = setInterval(() => {
        secondsLeft--;
        countdownElement.textContent = `距离下一次重试还有${secondsLeft}秒`;
        
        if(secondsLeft <= 0) {
            clearInterval(countdownInterval);
            countdownElement.style.display = 'none';
            checkLockStatus();
        }
    }, 1000);
}
</script>